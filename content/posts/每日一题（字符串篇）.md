---
title: 每日一题（字符串篇）
date: 2024-11-05
lastmod: 2024-11-05
tags:
  - 持续更新
  - C++
  - 字符串
  - 力扣原题
categories:
  - 编程
  - 算法
image: /../image/每日一题(字符串篇).jpg
top: true
hideFromHomePage: false
share: true
draft: false
---
# 简单题

## 13. 罗马数字转整数

[力扣原题链接 (简单题)](https://leetcode.cn/problems/roman-to-integer/description/)

罗马数字包含以下七种字符: `I`， `V`， `X`， `L`，`C`，`D` 和 `M`。

| **字符** | **数值** |
| ------ | ------ |
| I      | 1      |
| V      | 5      |
| X      | 10     |
| L      | 50     |
| C      | 100    |
| D      | 500    |
| M      | 1000   |

例如， 罗马数字 `2` 写做 `II` ，即为两个并列的 1 。`12` 写做 `XII` ，即为 `X` + `II` 。 `27` 写做  `XXVII`, 即为 `XX` + `V` + `II` 。

通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 `IIII`，而是 `IV`。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 `IX`。这个特殊的规则只适用于以下六种情况：

- `I` 可以放在 `V` (5) 和 `X` (10) 的左边，来表示 4 和 9。
- `X` 可以放在 `L` (50) 和 `C` (100) 的左边，来表示 40 和 90。 
- `C` 可以放在 `D` (500) 和 `M` (1000) 的左边，来表示 400 和 900。

给定一个罗马数字，将其转换成整数。

**示例 1:**

- **输入:** s = "III"
- **输出:** 3

**示例 2:**

- **输入:** s = "IV"
- **输出:** 4

**示例 3:**

- **输入:** s = "IX"
- **输出:** 9

**示例 4:**

- **输入:** s = "LVIII"
- **输出:** 58
- **解释:** L = 50, V= 5, III = 3.

**示例 5:**

- **输入:** s = "MCMXCIV"
- **输出:** 1994
- **解释:** M = 1000, CM = 900, XC = 90, IV = 4.

### 参考代码
```cpp
    int romanToInt(string s)
    {
        // 创建一个哈希表，将罗马数字对应的整数值进行映射
        unordered_map<char, int> map = {
            {'I', 1},
            {'V', 5},
            {'X', 10},
            {'L', 50},
            {'C', 100},
            {'D', 500},
            {'M', 1000}};
        char preChar = 'I'; // 初始化前一个字符为 'I'
        int sum = 0;        // 用于存储转换后的整数总和
        // 从字符串的最后一个字符开始向前遍历
        for (int i = s.length() - 1; i >= 0; --i)
        {
            // 如果当前字符对应的值小于前一个字符对应的值，则减去当前值
            if (map[s[i]] < map[preChar])
                sum -= map[s[i]];
            else // 否则，加上当前值
                sum += map[s[i]];
            preChar = s[i]; // 更新前一个字符
        }
        return sum; // 返回最终计算出的整数值
    }
```

#### 代码分析

1. **哈希表的使用**：
	- 利用 `unordered_map<char, int>` 创建了一个哈希表，将罗马数字字符（如 'I', 'V', 'X' 等）对应的整数值进行了映射。这使得查找每个罗马字符的整数值变得高效。

2. **初始化变量**：
	- `preChar` 用于记录前一个字符，初始设为 'I'。
	- `sum` 用于累计转换后的总和，初始为 0。

3. **从后向前遍历**：
	- 该算法自字符串的最后一个字符开始向前遍历，这是处理罗马数字的一种常见方法。
	- 遍历过程中比较当前字符与前一个字符对应的值：
		- 若当前字符的值小于前一个字符的值，则表示需减去当前值。
		 - 否则，直接加上当前值。

4. **更新前一个字符**：
	- 在每次循环结束后，更新 `preChar` 为当前字符，以便下次判断。

5. **返回结果**：
	- 最终返回 `sum`，即转换得到的整数值。

#### 注意点

- **字符顺序的重要性**：罗马数字的构成规则决定了从后向前遍历是必要的，这是因为可能会出现小的罗马数字在大的罗马数字前面的情况（如 IV = 4）。
- **边界条件**：应注意输入字符串的合法性，例如只允许包含有效的罗马数字字符。
- **性能考虑**：该实现的时间复杂度为 O(n)，其中 n 是输入字符串的长度；空间复杂度为 O(1)，因映射表不会随输入大小而变化。
- **哈希表的适用性**：使用哈希表可以快速查找罗马字符的值，这是提高效率的重要设计。