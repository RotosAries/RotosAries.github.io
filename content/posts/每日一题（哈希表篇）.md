---
title: 每日一题（哈希表篇）
date: 2024-11-16
lastmod: 2024-11-16
tags:
  - 持续更新
  - C++
  - 哈希表
  - 力扣原题
categories:
  - 编程
  - 算法
image: /image/每日一题/每日一题(哈希表篇).jpg
top: true
hideFromHomePage: false
share: true
draft: false
---
# 简单题

## 202. 快乐数

[力扣原题链接 (简单题)](https://leetcode.cn/problems/happy-number/description/)

编写一个算法来判断一个数 `n` 是不是快乐数。

**「快乐数」** 定义为：

- 对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。
- 然后重复这个过程直到这个数变为 1，也可能是 **无限循环** 但始终变不到 1。
- 如果这个过程 **结果为** 1，那么这个数就是快乐数。

如果 `n` 是 _快乐数_ 就返回 `true` ；不是，则返回 `false` 。

**示例 1：**

- **输入：** n = 19
- **输出：** true
- **解释：**
  12 + 92 = 82
  82 + 22 = 68
  62 + 82 = 100
  12 + 02 + 02 = 1

**示例 2：**

- **输入：** n = 2
- **输出：** false

**提示：**

- 1 <= n <= 2<sup>31</sup> - 1

### 参考代码

```cpp
    bool isHappy(int n)
    {
        int sum = 0, digit = 0;                  // 初始化 sum 为 0，digit 为 0
        unordered_map<int, bool> map{{n, true}}; // 创建一个哈希表，记录已出现的和
        while (true) // 无限循环，直到找到结果
        {
            digit = n % 10;       // 取出当前数字的最后一位
            n /= 10;              // 去掉最后一位数字
            sum += digit * digit; // 计算当前数字的平方并累加到 sum
            if (n == 0) // 如果 n 变为 0，说明已经处理完所有位
            {
                if (sum == 1) // 如果当前和为 1，n 是快乐数
                    break;
                if (map[sum] == true) // 如果当前和已经出现过，n 不是快乐数
                    return false;
                map[sum] = true; // 将当前和加入哈希表
                n = sum;         // 将和作为新的 n 继续处理
                sum = 0;         // 重置 sum 为 0，准备下一轮计算
            }
        }
        return true; // 如果循环结束，说明 n 是快乐数
    }
```

#### 算法步骤

1. **初始化**：
	- 创建一个变量 `sum` 用于保存每次计算的平方和，初始为 0。
	- 创建一个变量 `digit` 用于保存提取的每位数字，初始为 0。
	- 使用哈希表 `map` 来记录已经出现过的平方和，初始化时将输入 `n` 加入。

2. **循环处理**：
	- 使用 `while (true)` 无限循环，直到找到结果（快乐数或确定不是快乐数）。
	- 在循环内，提取 `n` 的最后一位数字，并更新 `n` 去掉最后一位。
	- 计算当前数字的平方并累加到 `sum`。

3. **条件判断**：
	- 如果 `n` 变为 0，表示已经处理完所有位：
		- 检查 `sum` 是否为 1，是则退出循环，返回 `true`。
		- 如果当前的 `sum` 已经在哈希表中出现过，说明进入循环，返回 `false`。
		- 否则，将当前 `sum` 记录进哈希表，并将 `sum` 作为新的 `n` 继续处理，同时重置 `sum`。

4. **结束条件**：
	- 如果循环结束，说明 `n` 到达 1，返回 `true`。

#### 注意点

- **循环检测**：使用哈希表来记录已经出现过的平方和，有效避免无限循环。
- **重置和更新**：在每次计算平方和后，将其作为新的 `n` 处理，并重置 `sum`，确保每轮计算的独立性。
